<div class="rules-editor">

  <mat-form-field appearance="fill" class="filter-input" subscriptSizing="fixed">
    <mat-label>Filter</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Filter rules" />
  </mat-form-field>

  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
      <td mat-cell *matCellDef="let rule">
        <mat-form-field appearance="fill" subscriptSizing="fixed">
          <input matInput [(ngModel)]="rule.name" placeholder="Name" />
        </mat-form-field>
      </td>
    </ng-container>

    <!-- Rule Type Column -->
    <ng-container matColumnDef="rule_type">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Rule Type</th>
      <td mat-cell *matCellDef="let rule">
        <mat-form-field appearance="fill" subscriptSizing="fixed">
          <mat-select [(ngModel)]="rule.rule_type" placeholder="Select Rule Type">
            <mat-option [value]="'gang_skill'">Gang Skill</mat-option>
            <mat-option [value]="'ganger_special_rule'">Ganger Special Rule</mat-option>
            <mat-option [value]="'weapon_trait'">Weapon Trait</mat-option>
            <mat-option [value]="'equipment'">Equipment</mat-option>
            <mat-option [value]="'pysker'">Psyker</mat-option>
          </mat-select>
        </mat-form-field>
      </td>
    </ng-container>

    <!-- Description Column -->
    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>Description</th>
      <td mat-cell *matCellDef="let rule">
        <mat-form-field appearance="fill" subscriptSizing="fixed">
          <input matInput [(ngModel)]="rule.description" placeholder="Description" />
        </mat-form-field>
      </td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>
        <button mat-fab color="primary" (click)="addNewRule()" aria-label="Add New Rule">
          <mat-icon>add</mat-icon>
        </button>
      </th>
      <td mat-cell *matCellDef="let rule">
        <button mat-button color="primary" (click)="saveRule(rule)" class="action-cell-button">
          <mat-icon>save</mat-icon>
        </button>
        <button mat-button color="warn" (click)="deleteRule(rule)" class="action-cell-button">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>